<!-- ä¸ªäººä¸­å¿ƒ -->
<template>
  <div class="page app-mine">
    <CommonHeader title="ä¸ªäººä¸­å¿ƒ" class="app-common-header"> </CommonHeader>

    <div class="info">
      <!-- æœªç™»å½• -->
      <van-empty v-if="!isLogin" description="ç³Ÿç³•...è¿˜æ²¡æœ‰ç™»å½•ğŸ˜¯...">
        <!-- å£°æ˜å¼å¯¼èˆª -->
        <router-link to="/login" custom v-slot="{ navigate }">
          <van-button
            @click="navigate"
            round
            type="primary"
            class="bottom-button"
            >è¯·å…ˆç™»å½•</van-button
          >
        </router-link>
      </van-empty>

      <!-- ç™»å½• -->
      <div class="userInfo" v-else>
        <van-image round width="3rem" height="3rem" :src="userInfo.avatar" />
        <h3>
          å°Šè´µçš„
          <span>{{ userInfo.nickname }}</span>
          è€æ¿
        </h3>

        <!-- é€€å‡ºç™»å½• -->
        <van-button @click="exitLogin" round type="primary" class="bottom-button">é€€ å‡º ç™» å½•</van-button>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { useUserStore } from "@/stores/user";
import { storeToRefs } from "pinia";

const userStore = useUserStore();

// æƒ³è§£æ„userStoreä¸­çš„æ•°æ®ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ES6è¯­æ³•ï¼Œä¼šå˜æˆéå“åº”å¼æ•°æ®ï¼Œåº”è¯¥ä½¿ç”¨ storeToRefs
const { isLogin, userInfo } = storeToRefs(userStore);
// ã€ç–‘æƒ‘ã€‘ä¸ºä»€ä¹ˆè¿™é‡Œä½¿ç”¨userInfoä¸éœ€è¦ .value ä½¿ç”¨ï¼Œåœ¨AppCart/indexä¸­éœ€è¦
// ã€å·²è§£å†³ã€‘åœ¨jsä¸­ä½¿ç”¨æ—¶éœ€è¦æ·»åŠ  .value ,åœ¨templateæ¨¡æ¿ä¸­ä¸éœ€è¦ .valueï¼ˆä¸ºä»€ä¹ˆï¼Ÿï¼‰

// é€€å‡ºç™»å½•
const exitLogin = () => {
  userStore.exitAciton()
}
</script>

<style scoped lang="scss">
.info {
  position: relative;

  .van-empty {
    margin-top: 2.5rem;

    .bottom-button {
      width: 160px;
      height: 40px;
    }
  }

  // ç™»å½•å-ä¿¡æ¯é¡µ
  .userInfo {
    position: absolute;
    top: 2rem;
    left: 2.1rem;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;

    h3 {
      margin-top: 0.3rem;
      font-size: 20px;

      span {
        color: goldenrod;
      }
    }

    .van-button {
      margin-top: 3.5rem;
      padding: 0 1rem;
    }
  }
}
</style>
